<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ki·∫øm Ti·ªÅn B·∫±ng Qu·∫£ng C√°o</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f9f9f9; height: 100vh; overflow: hidden; }
        .sidebar { width: 60px; background: #007bff; height: 95vh; position: fixed; left: 10px; top: 10px; transition: 0.3s; box-shadow: 3px 0 5px rgba(0,0,0,0.2); z-index: 1100; display: flex; flex-direction: column; align-items: center; overflow: hidden; border-radius: 10px; padding-top: 20px; }
        .sidebar.expanded { width: 250px; align-items: flex-start; }
        .menu-btn { font-size: 30px; border: none; background: none; color: white; cursor: pointer; }
        .menu-items { display: flex; flex-direction: column; align-items: center; width: 100%; margin-top: 20px; }
        .menu-items a { color: white; text-decoration: none; font-size: 20px; padding: 15px; width: 100%; text-align: left; display: flex; align-items: center; transition: 0.3s; white-space: nowrap; overflow: hidden; border-radius: 5px; justify-content: center; }
        .menu-items a i { margin-right: 10px; }
        .menu-items a span { display: none; }
        .sidebar.expanded .menu-items a { justify-content: flex-start; }
        .sidebar.expanded .menu-items a span { display: inline; }
        .menu-items a:hover { background: #0056b3; }

        .container { width: 80%; max-width: 900px; padding: 20px; background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-radius: 10px; position: relative; top: 50px; margin: auto; z-index: 1000; }
        .section { display: none; padding: 20px; }
        .section.active { display: block; }
        .btn { display: inline-block; padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; transition: 0.3s; }
        .btn:hover { background: #0056b3; }

        .dashboard { display: flex; flex-wrap: wrap; justify-content: space-between; }
        .dashboard-box { background: #eef; padding: 20px; border-radius: 10px; flex: 1; min-width: 250px; margin: 10px; text-align: center; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); }
        .dashboard-box h3 { margin: 0 0 10px; font-size: 18px; color: #333; }
        .dashboard-box p { font-size: 24px; font-weight: bold; color: #007bff; }

        .account-settings { display: flex; }
        .nav-panel { width: 200px; padding: 10px; background: #eef; border-radius: 10px; margin-right: 20px; }
        .nav-panel button { width: 100%; padding: 10px; margin: 5px 0; border: none; background: #007bff; color: white; cursor: pointer; border-radius: 5px; transition: 0.3s; }
        .nav-panel button:hover { background: #0056b3; }
        .content-panel { flex-grow: 1; padding: 20px; background: white; border-radius: 10px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); }

        video { margin: 20px 0; }
        .hidden { display: none; }
        form { margin: 20px 0; }
        input, select { padding: 8px; margin: 5px 0; width: 200px; border: 1px solid #ccc; border-radius: 5px; }
        .btn1 { width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .btn1:hover { background: #0056b3; }
        .history { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #007bff; color: white; }
    </style>
</head>
<body>
    <div class="sidebar" id="sidebar">
        <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
        <div class="menu-items">
            <a href="#" onclick="showSection('home')">üè† <span>Trang ch·ªß</span></a>
            <a href="#" onclick="showSection('tasks')">üéØ <span>Nhi·ªám v·ª•</span></a>
            <a href="#" onclick="showSection('account')">üë§ <span>C√†i ƒë·∫∑t t√†i kho·∫£n</span></a>
            <a href="#" onclick="showSection('withdraw')">üí∞ <span>R√∫t ti·ªÅn</span></a>
            <a href="#" onclick="showSection('faq')">‚ùì <span>H·ªèi ƒë√°p</span></a>
            <a href="#" onclick="logout()" id="logoutLink" class="hidden">üö™ <span>ƒêƒÉng xu·∫•t</span></a>
        </div>
    </div>

    <div class="container">
        <!-- Trang ƒëƒÉng nh·∫≠p -->
        <div id="login" class="section active">
            <h2>ƒêƒÉng Nh·∫≠p</h2>
            <form id="loginForm">
                <label for="loginUsername">T√™n ng∆∞·ªùi d√πng:</label><br>
                <input type="text" id="loginUsername" required><br>
                <label for="loginPassword">M·∫≠t kh·∫©u:</label><br>
                <input type="password" id="loginPassword" required><br>
                <button type="submit" class="btn">ƒêƒÉng Nh·∫≠p</button>
            </form>
            <p>Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="showSection('register')">ƒêƒÉng k√Ω</a></p>
        </div>

        <!-- Trang ƒëƒÉng k√Ω -->
        <div id="register" class="section">
            <h2>ƒêƒÉng K√Ω T√†i Kho·∫£n</h2>
            <form id="registerForm">
                <label for="username">T√™n ng∆∞·ªùi d√πng:</label><br>
                <input type="text" id="username" required><br>
                <label for="email">Email:</label><br>
                <input type="email" id="email" required><br>
                <label for="password">M·∫≠t kh·∫©u:</label><br>
                <input type="password" id="password" required><br>
                <button type="submit" class="btn">ƒêƒÉng K√Ω</button>
            </form>
            <p>ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="showSection('login')">ƒêƒÉng nh·∫≠p</a></p>
        </div>

        <!-- Trang ch·ªß -->
        <div id="home" class="section">
            <h2>Trang ch·ªß</h2>
            <div class="dashboard">
                <div class="dashboard-box">
                    <h3>S·ªë d∆∞</h3>
                    <p id="balance">0 VNƒê</p>
                </div>
                <div class="dashboard-box">
                    <h3>Nhi·ªám v·ª• ƒë√£ l√†m</h3>
                    <p id="taskCount">0</p>
                </div>
                <div class="dashboard-box">
                    <h3>R√∫t ti·ªÅn g·∫ßn nh·∫•t</h3>
                    <p id="lastWithdraw">Ch∆∞a c√≥ giao d·ªãch</p>
                </div>
            </div>
        </div>

        <!-- Trang nhi·ªám v·ª• -->
        <div id="tasks" class="section">
            <h2>Nhi·ªám v·ª•</h2>
            <a href="https://www.effectiveratecpm.com/fufn6sq8ms?key=20d9a515e885c3fe767e70971f5b1e4f" id="getTaskBtn" class="btn" target="_blank" onclick="handleTaskClick(event)">Nh·∫≠n nhi·ªám v·ª•</a>
            <div id="adContainer" class="hidden">
                <video id="adVideo" width="600" controls>
                    <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                    Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
                </video>
                <button id="rewardBtn" class="btn hidden">Nh·∫≠n th∆∞·ªüng (10 VNƒê)</button>
            </div>
            <h3>H∆∞·ªõng d·∫´n l√†m nhi·ªám v·ª•</h3>
            <p>B∆∞·ªõc 1: Nh·∫•n "Nh·∫≠n nhi·ªám v·ª•" ƒë·ªÉ m·ªü qu·∫£ng c√°o v√† b·∫Øt ƒë·∫ßu.</p>
            <p>B∆∞·ªõc 2: Xem video qu·∫£ng c√°o ƒë·∫øn h·∫øt.</p>
            <p>B∆∞·ªõc 3: Nh·∫•n "Nh·∫≠n th∆∞·ªüng" khi ho√†n th√†nh.</p>
        </div>

        <!-- Trang c√†i ƒë·∫∑t t√†i kho·∫£n -->
        <div id="account" class="section">
            <h2>C√†i ƒë·∫∑t t√†i kho·∫£n</h2>
            <div class="account-settings">
                <div class="nav-panel">
                    <button onclick="showContent('personal-info')">Th√¥ng tin c√° nh√¢n</button>
                    <button onclick="showContent('bank-info')">T√†i kho·∫£n ng√¢n h√†ng</button>
                </div>
                <div class="content-panel">
                    <div id="personal-info">
                        <p>T√™n ng∆∞·ªùi d√πng: <span id="dashUsername"></span></p>
                        <p>Email: <span id="dashEmail"></span></p>
                    </div>
                    <div id="bank-info" style="display: none;">
                        <h3>Th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng</h3>
                        <form id="bankForm">
                            <label for="fullName">H·ªç v√† t√™n:</label><br>
                            <input type="text" id="fullName" placeholder="Nh·∫≠p h·ªç v√† t√™n"><br>
                            <label for="accountNumber">S·ªë t√†i kho·∫£n:</label><br>
                            <input type="text" id="accountNumber" placeholder="Nh·∫≠p s·ªë t√†i kho·∫£n"><br>
                            <label for="bankName">Ng√¢n h√†ng:</label><br>
                            <select id="bankName">
                                <option value="">Ch·ªçn ng√¢n h√†ng</option>
                                <option value="Vietcombank">Vietcombank</option>
                                <option value="Techcombank">Techcombank</option>
                                <option value="MB Bank">MB Bank</option>
                                <option value="VPBank">VPBank</option>
                                <option value="Agribank">Agribank</option>
                            </select><br>
                            <button type="submit" class="btn" style="margin-top: 10px;">L∆∞u th√¥ng tin</button>
                        </form>
                        <p id="bankInfoDisplay" style="margin-top: 10px;"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trang r√∫t ti·ªÅn -->
        <div id="withdraw" class="section">
            <h2>R√∫t Ti·ªÅn</h2>
            <select id="withdrawAmount">
                <option value="50000">50,000 VNƒê</option>
                <option value="100000">100,000 VNƒê</option>
                <option value="500000">500,000 VNƒê</option>
                <option value="1000000">1,000,000 VNƒê</option>
            </select>
            <button class="btn1" onclick="withdrawMoney()">R√∫t ti·ªÅn</button>
            <div class="history">
                <h3>L·ªãch s·ª≠ r√∫t ti·ªÅn</h3>
                <table>
                    <thead>
                        <tr><th>S·ªë ti·ªÅn</th><th>Th·ªùi gian</th></tr>
                    </thead>
                    <tbody id="withdrawHistory"></tbody>
                </table>
            </div>
        </div>

        <!-- Trang h·ªèi ƒë√°p -->
        <div id="faq" class="section">
            <h2>H·ªèi ƒê√°p</h2>
            <h3>H·ªèi xo√°y ƒë√°p nhanh</h3>
            <input type="text" id="questionInput" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." style="width: 100%;">
            <button class="btn" onclick="submitQuestion()">G·ª≠i ƒëi</button>
            <p id="answerOutput" style="margin-top: 10px; font-style: italic;"></p>
        </div>
    </div>

    <!-- Ch√®n m√£ Adsterra Pop-under to√†n trang -->
    <script type='text/javascript' src='//pl25955918.effectiveratecpm.com/96/f2/07/96f20718c0568a5f71c4bf09a3666d33.js'></script>

    <script>
        // Qu·∫£n l√Ω sidebar
        let sidebar = document.getElementById("sidebar");
        sidebar.addEventListener("mouseenter", () => sidebar.classList.add("expanded"));
        sidebar.addEventListener("mouseleave", () => sidebar.classList.remove("expanded"));
        document.addEventListener("click", (event) => {
            if (!sidebar.contains(event.target) && !event.target.classList.contains("menu-btn")) {
                sidebar.classList.remove("expanded");
            }
        });
        function toggleMenu() {
            sidebar.classList.toggle("expanded");
        }

        // Qu·∫£n l√Ω section
        function showSection(id) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (currentUser && (id !== 'login' && id !== 'register')) {
                document.getElementById('logoutLink').classList.remove('hidden');
            } else {
                document.getElementById('logoutLink').classList.add('hidden');
            }
            if (id !== 'tasks') {
                document.getElementById('adContainer').classList.add('hidden');
                document.getElementById('rewardBtn').classList.add('hidden');
            }
            if (id === 'account' && currentUser) {
                updateBankInfo();
            }
        }

        // Qu·∫£n l√Ω content trong c√†i ƒë·∫∑t t√†i kho·∫£n
        function showContent(id) {
            document.querySelectorAll('.content-panel > div').forEach(div => div.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            if (id === 'bank-info' && currentUser) {
                updateBankInfo();
            }
        }

        // L∆∞u tr·ªØ d·ªØ li·ªáu
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let taskCount = parseInt(localStorage.getItem('taskCount')) || 0;

        // ƒêƒÉng k√Ω
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (users.find(u => u.username === username)) {
                alert('T√™n ng∆∞·ªùi d√πng ƒë√£ t·ªìn t·∫°i!');
            } else if (users.find(u => u.email === email)) {
                alert('Email ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng!');
            } else {
                users.push({ username, email, password, balance: 0, history: [], bankInfo: {} });
                localStorage.setItem('users', JSON.stringify(users));
                alert('ƒêƒÉng k√Ω th√†nh c√¥ng! H√£y ƒëƒÉng nh·∫≠p.');
                showSection('login');
            }
        });

        // ƒêƒÉng nh·∫≠p
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            const user = users.find(u => u.username === username && u.password === password);
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateDashboard();
                showSection('home');
            } else {
                alert('Sai t√™n ng∆∞·ªùi d√πng ho·∫∑c m·∫≠t kh·∫©u!');
            }
        });

        // Nh·∫≠n nhi·ªám v·ª• v·ªõi Direct Link
        function handleTaskClick(event) {
            if (!currentUser) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ nh·∫≠n nhi·ªám v·ª•!');
                showSection('login');
                event.preventDefault();
                return;
            }
            // M·ªü Direct Link trong tab m·ªõi, sau ƒë√≥ ti·∫øp t·ª•c hi·ªÉn th·ªã video
            setTimeout(() => {
                const adContainer = document.getElementById('adContainer');
                adContainer.classList.remove('hidden');
                const video = document.getElementById('adVideo');
                video.currentTime = 0;
                video.play();
            }, 100); // Delay nh·∫π ƒë·ªÉ kh√¥ng xung ƒë·ªôt v·ªõi tab m·ªõi
        }

        // X·ª≠ l√Ω qu·∫£ng c√°o
        const video = document.getElementById('adVideo');
        const rewardBtn = document.getElementById('rewardBtn');
        if (video && rewardBtn) {
            video.onended = function() {
                rewardBtn.classList.remove('hidden');
            };
            rewardBtn.onclick = function() {
                if (currentUser) {
                    currentUser.balance += 10;
                    taskCount += 1;
                    currentUser.history.push(`+10 VNƒê t·ª´ qu·∫£ng c√°o (${new Date().toLocaleString()})`);
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    localStorage.setItem('taskCount', taskCount);
                    users = users.map(u => u.username === currentUser.username ? currentUser : u);
                    localStorage.setItem('users', JSON.stringify(users));
                    updateDashboard();
                    alert('B·∫°n ƒë√£ nh·∫≠n 10 VNƒê!');
                    rewardBtn.classList.add('hidden');
                    document.getElementById('adContainer').classList.add('hidden');
                }
            };
        }

        // C·∫≠p nh·∫≠t dashboard
        function updateDashboard() {
            if (currentUser) {
                document.getElementById('balance').textContent = `${currentUser.balance} VNƒê`;
                document.getElementById('taskCount').textContent = taskCount;
                document.getElementById('lastWithdraw').textContent = currentUser.history.length > 0 ? currentUser.history[currentUser.history.length - 1] : 'Ch∆∞a c√≥ giao d·ªãch';
                document.getElementById('dashUsername').textContent = currentUser.username;
                document.getElementById('dashEmail').textContent = currentUser.email;
            }
        }

        // ƒêƒÉng xu·∫•t
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            showSection('login');
        }

        // R√∫t ti·ªÅn v√† g·ª≠i qua mailto
        function withdrawMoney() {
            let amount = parseInt(document.getElementById("withdrawAmount").value);
            if (!currentUser || currentUser.balance < amount) {
                alert("S·ªë d∆∞ kh√¥ng ƒë·ªß ƒë·ªÉ r√∫t ti·ªÅn!");
                return;
            }
            if (!currentUser.bankInfo || !currentUser.bankInfo.fullName || !currentUser.bankInfo.accountNumber || !currentUser.bankInfo.bankName) {
                alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng tr∆∞·ªõc khi r√∫t ti·ªÅn!");
                showSection('account');
                showContent('bank-info');
                return;
            }

            const subject = encodeURIComponent("Y√™u c·∫ßu r√∫t ti·ªÅn");
            const body = encodeURIComponent(
                `S·ªë ti·ªÅn: ${amount} VNƒê\n` +
                `Ng√¢n h√†ng: ${currentUser.bankInfo.bankName}\n` +
                `S·ªë t√†i kho·∫£n: ${currentUser.bankInfo.accountNumber}\n` +
                `T√™n ng∆∞·ªùi d√πng: ${currentUser.username}\n` +
                `Email: ${currentUser.email}`
            );
            window.location.href = `mailto:hoai741412@gmail.com?subject=${subject}&body=${body}`;

            let historyTable = document.getElementById("withdrawHistory");
            let newRow = historyTable.insertRow();
            newRow.innerHTML = `<td>${amount} VNƒê</td><td>${new Date().toLocaleString()}</td>`;
            currentUser.balance -= amount;
            currentUser.history.push(`R√∫t ${amount} VNƒê (${new Date().toLocaleString()})`);
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            users = users.map(u => u.username === currentUser.username ? currentUser : u);
            localStorage.setItem('users', JSON.stringify(users));
            updateDashboard();
            alert("Vui l√≤ng nh·∫•n 'Send' trong ·ª©ng d·ª•ng email ƒë·ªÉ ho√†n t·∫•t y√™u c·∫ßu r√∫t ti·ªÅn!");
        }

        // H·ªèi ƒë√°p v√† g·ª≠i qua mailto
        function submitQuestion() {
            let question = document.getElementById("questionInput").value.trim();
            let answerOutput = document.getElementById("answerOutput");
            if (question === "") {
                answerOutput.textContent = "Vui l√≤ng nh·∫≠p c√¢u h·ªèi!";
                return;
            }
            if (!currentUser) {
                answerOutput.textContent = "Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ g·ª≠i c√¢u h·ªèi!";
                showSection('login');
                return;
            }

            const subject = encodeURIComponent("C√¢u h·ªèi t·ª´ ng∆∞·ªùi d√πng");
            const body = encodeURIComponent(
                `C√¢u h·ªèi: ${question}\n` +
                `T√™n ng∆∞·ªùi d√πng: ${currentUser.username}\n` +
                `Email: ${currentUser.email}`
            );
            window.location.href = `mailto:hoai741412@gmail.com?subject=${subject}&body=${body}`;

            answerOutput.textContent = "Vui l√≤ng nh·∫•n 'Send' trong ·ª©ng d·ª•ng email ƒë·ªÉ ho√†n t·∫•t g·ª≠i c√¢u h·ªèi!";
            document.getElementById("questionInput").value = "";
        }

        // L∆∞u th√¥ng tin ng√¢n h√†ng
        document.getElementById('bankForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (!currentUser) return;
            const fullName = document.getElementById('fullName').value;
            const accountNumber = document.getElementById('accountNumber').value;
            const bankName = document.getElementById('bankName').value;

            if (!fullName || !accountNumber || !bankName) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }

            currentUser.bankInfo = { fullName, accountNumber, bankName };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            users = users.map(u => u.username === currentUser.username ? currentUser : u);
            localStorage.setItem('users', JSON.stringify(users));
            alert('Th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng ƒë√£ ƒë∆∞·ª£c l∆∞u!');
            updateBankInfo();
        });

        // Hi·ªÉn th·ªã th√¥ng tin ng√¢n h√†ng
        function updateBankInfo() {
            if (currentUser && currentUser.bankInfo && currentUser.bankInfo.fullName) {
                document.getElementById('bankInfoDisplay').textContent = 
                    `H·ªç v√† t√™n: ${currentUser.bankInfo.fullName}, S·ªë t√†i kho·∫£n: ${currentUser.bankInfo.accountNumber}, Ng√¢n h√†ng: ${currentUser.bankInfo.bankName}`;
                document.getElementById('fullName').value = currentUser.bankInfo.fullName;
                document.getElementById('accountNumber').value = currentUser.bankInfo.accountNumber;
                document.getElementById('bankName').value = currentUser.bankInfo.bankName;
            } else {
                document.getElementById('bankInfoDisplay').textContent = 'Ch∆∞a c√≥ th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng.';
            }
        }

        // Kh·ªüi t·∫°o
        if (currentUser) {
            updateDashboard();
            showSection('home');
        }
    </script>
</body>
</html>